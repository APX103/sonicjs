<script type='text/javascript'>

const formJSON_{{ random }} = {{{ formJSON }}}

const formValuesToLoad_{{ random }} = {{{ formValuesToLoad }}}

    loadModuleSettingForm = async function () {
        // debugger;
        Formio.icons = 'fontawesome';
        Formio.createForm(document.getElementById('formio_{{ random }}'), formJSON_{{ random }}).then((form) => {
            console.log('log form', form);

            if (formValuesToLoad_{{ random }}) {
                form.submission = {
                    data: formValuesToLoad_{{ random }}
                };
            }

            form.on('submit', async function (submission) {

                amplitude.getInstance().logEvent('FORM_SUBMIT');

                {{ onFormSubmitFunction }}

            });

            // Everytime the form changes, this will fire.
            // form.on('change', function (changed) {
            //     console.log('Form was changed', changed);
            // });

        });
    };

    window.onload = async function () {
        // debugger;
        if (typeof module === 'undefined') {
            loadModuleSettingForm();
        }
    }

</script>

<div id='formio_{{ random }}'></div>
